# Harnessing ISLM with SAP HANA ML 
## Scenario storyline: First Class Seats Occupied 
In this practical exercise, our focus is on utilizing the SAP HANA Machine Learning (ML) algorithm to predict the occupancy of first-class seats on flights using APL Library. 

To execute this exercise, we will leverage the Intelligent Scenario Lifecycle Management (ISLM) framework. ISLM serves as the foundation for creating and managing ML use cases seamlessly within the SAP S/4HANA stack. 

This exercise includes the following steps: 

1) **Creating a New Intelligent Scenario:** We will begin by creating a new intelligent scenario that will encompass the predictive model for first-class seat occupancy. 

2) **Operating the Intelligent Scenario:** Once the scenario is set up, we will operate it to enable the prediction process. 

3) **Visualizing Model Version Predictions:** This step involves visualizing the predictions generated by the model versions within the intelligent scenario. 

4) **Schedule Training:** This step involves scheduling training for intelligent scenario based on selected frequency. 

By the end of this exercise, participants will have gained hands-on experience in utilizing the ISLM framework and SAP HANA ML algorithm to enhance decision-making processes and improve customer experiences. 

## 1. Create Intelligent Scenario 
The Intelligent Scenarios app is used to create intelligent scenarios, review, and publish them, and to make them available in the Intelligent Scenario Management app. 

In this step, you’ll create a new intelligent scenario to predict the airplane seats occupation in the first class of a flight using SAP HANA ML algorithm. 

 

For this use case we will use regression model with Gradient Boosting algorithm. 

SAP HANA APL lets you build and apply different types of predictive models, such as classification, regression, and time series forecasting models.  

Gradient Boosting regression model type provides a more accurate modeling result than the legacy regression model.

1. Open the Fiori Launchpad. Check the URL, Input the username and password provided in the cheat sheet. Click on My Home section and choose the Intelligent Scenario app.

![](./images/1.png)

2. Click the Create button and chooseàEmbedded. In Embedded approach, a business application, for example SAP S/4HANA runs in the same stack as its machine learning provider SAP HANA machine learning with the analytics libraries SAP HANA Automated Predictive Library (APL) or SAP HANA Predictive Analysis Library (PAL).

![](./images/2.png)

3. Click on Do Not Show Again and Close in the Onboarding Dialog.

![](./images/3.png)

4. Provide the required information in the screen: 
    1) Intelligent Scenario Name: Enter a unique name starting with Z, such as Z_SEATOCC_FTCLAS_### ### is your attendee id. 
    2) Intelligent Scenario Description: Enter a description for the Intelligent Scenario. Intelligent Scenario Type, Algorithm and Machine Learning Library is automatically populated.

![](./images/4.png)
    
5. Click on the Add Model button.

![](./images/5.png)

6. The APL Regression Model screen will pop up. Provide information as mentioned below: 
    1) Name: Enter a model name starting with Z. 
    2) Description: Enter a description.
    
    ![](./images/6.png)

    3) Enter a CDS view to be used as Training Dataset: `ZISLM_SFLIGHT_TRAIN_CDS`. Training Dataset to be used for training the model. 
    4) Enter a CDS view to be used as Apply Dataset: `ZISLM_SFLIGHT_APPLY_CDS `(Note that apply dataset is different from training dataset). Apply dataset is Dataset used for prediction.

    ![](./images/7.png)

    5) Select your target variable. Target: `SEATSOCCF`. Target variable is field whose value you want to predict. 
    6) Max Reason Code: `1` Number of reason codes you want to generate. Reason codes are variables whose values have the most influence in a score-based decision (typically a risk score). The variables for which the contribution is the most differential are selected as the most important reason codes. Apply output configuration has the selected metrics that are added in the intelligent scenario output and used for prediction. 
    7) Click on the **Add** button.
    ![](./images/8.png)

7. The scenario is now created in Draft Status. View the Input and Output fields to train the model in the **Input and 
   Outputs Tabs** respectively.<br>

   Input Tab displays the key, input, and target fields. 
   The Input variable is considered for modelling. The Key variable is a key field of the dataset and is also considered 
   for modelling. The Target variable is the variable whose values are to be modelled and predicted by other variables.
   <br>
   
   Output tab displays the Key, Target, and Prediction fields. 
The Prediction variable includes the calculation result.
![](./images/9.png)

8. Scenario is now ready to be published. Click on Publish button. You will receive a message that Intelligent Scenario is published.
![](./images/10.png)
9. Search the Intelligent Scenario created by you by entering the **Intelligent Scenario name and Status = Published**.
![](./images/11.png)
10. Navigate to the details page by clicking the `>` icon. 
![](./images/12.png)
11. Click on **Apply Setting** Tab and copy the CDS View name. CDS views are generated for the intelligent scenario to allow easy access to the predictions <br>![](./images/13.png)
### Well done, you just created your first embedded Intelligent Scenario.
<br>

## 2. Operating the Intelligent Scenario
Once the Intelligent Scenario is published, the Intelligent Scenario Management app helps you to train, monitor the model quality and activate the model for productive usage.

In this section, you will use the Intelligent Scenario Management app to perform ML operations. 

1. Open the Fiori Launchpad. Check the URL, Input the username and password provided in the cheat sheet. Click on My Home section and choose the Intelligent Scenario Management app.
![](./images/13.png)